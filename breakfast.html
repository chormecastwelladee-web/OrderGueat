<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</title>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f4f4f9; color:#333; }
.container { display:flex; flex-wrap:wrap; max-width:1200px; margin:20px auto; gap:20px; }
.slider { flex:1; min-width:300px; border-radius:8px; overflow:hidden; }
.slider img { width:100%; display:none; border-radius:8px; }
.slider img.active { display:block; }
.menu-form { flex:1; min-width:300px; background:#fff; padding:15px; border-radius:8px; box-shadow:0 2px 4px rgba(0,0,0,0.1); }
h2 { color:#007bff; margin-top:0; }
.menu-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(150px,1fr)); gap:10px; margin-top:10px; }
.menu-item { border:1px solid #ddd; border-radius:8px; padding:8px; cursor:pointer; text-align:center; position:relative; transition:0.2s; }
.menu-item.selected { border:2px solid #28a745; box-shadow:0 0 10px rgba(40,167,69,0.5); }
.selected-icon { position:absolute; top:5px; right:5px; background:#28a745; color:white; border-radius:50%; width:24px; height:24px; line-height:24px; font-weight:bold; display:none; }
.menu-item.selected .selected-icon { display:block; }
#summary { margin-top:20px; padding:10px; background:#e9ecef; border-radius:4px; }
button#submit-order { width:100%; padding:15px; margin-top:15px; background:#28a745; color:#fff; border:none; border-radius:4px; cursor:pointer; font-size:1.1em; }
button#submit-order:hover { background:#218838; }
button#back { margin-bottom:15px; background:#007bff; color:#fff; padding:10px 15px; border:none; border-radius:4px; cursor:pointer; }
button#back:hover { background:#0056b3; }
label { display:block; margin-top:10px; font-weight:bold; }
input[type="text"], input[type="number"], input[type="time"], select { width:100%; padding:8px; margin-top:5px; border:1px solid #ccc; border-radius:4px; box-sizing:border-box; }
.alert-message { background-color: #ffc107; color: #333; padding: 10px; border-radius: 4px; margin-top: 10px; font-weight: bold; text-align: center; display: none; }
</style>
</head>
<body>
<div class="container">
    <div class="slider" id="slider">
        <img src="food1.jpg" class="active">
        <img src="food2.jpg">
        <img src="food3.jpg">
    </div>

    <div class="menu-form">
        <button id="back" onclick="window.history.back()">üîô ‡∏Å‡∏•‡∏±‡∏ö</button>
        <h2>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h2>
        <form id="order-form">
            <label for="roomNo">‡πÄ‡∏•‡∏Ç‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å:</label>
            <input type="text" id="roomNo" required pattern="[A-Za-z0-9]+" placeholder="‡πÄ‡∏ä‡πà‡∏ô 101">
            <label for="pax">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡πà‡∏≤‡∏ô:</label>
            <input type="number" id="pax" min="1" value="1" required>
            <label for="serviceType">‡∏ß‡∏¥‡∏ò‡∏µ‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏´‡∏≤‡∏£:</label>
            <select id="serviceType" required>
                <option value="Dine-in">‡∏ó‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡πâ‡∏≤‡∏ô</option>
                <option value="Room-service">Room service</option>
            </select>
            <label for="time">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏á/‡πÉ‡∏´‡πâ‡πÑ‡∏õ‡∏™‡πà‡∏á:</label>
            <input type="time" id="time" value="09:00" required>
            <div id="room-service-alert" class="alert-message">‚ö†Ô∏è Room service ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ 9 ‡πÇ‡∏°‡∏á‡πÄ‡∏ä‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏ô‡πÑ‡∏õ</div>
        </form>

        <h2>‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h2>
        <div id="menu-container" class="menu-grid"></div>

        <div id="summary">
            <h3>‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:</h3>
            <ul id="selected-menu-list">
                <li>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π</li>
            </ul>
        </div>
        <button id="submit-order">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
    </div>
</div>

<script>
const WEB_APP_URL = 'YOUR_WEB_APP_URL'; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô URL ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
const BREAKFAST_START_TIME='07:00';
const BREAKFAST_END_TIME='10:30';
const ROOM_SERVICE_START_TIME='09:00';

let selectedMenu={};

const selectedCategory = localStorage.getItem('selectedCategory') || 'Breakfast';

const MENU_DATA=[
    { category:'‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏ä‡πâ‡∏≤', type:'Breakfast', items:['‡πÑ‡∏Ç‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏∞','‡πÇ‡∏à‡πä‡∏Å‡∏´‡∏°‡∏π','‡∏Ç‡πâ‡∏≤‡∏ß‡∏ï‡πâ‡∏°‡∏Å‡∏∏‡πâ‡∏á','‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏±‡∏ô‡πÄ‡∏ö‡∏£‡∏Ñ‡∏ü‡∏≤‡∏™‡∏ï‡πå','‡πÅ‡∏û‡∏ô‡πÄ‡∏Ñ‡πâ‡∏Å','‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡∏ù‡∏£‡∏±‡πà‡∏á‡πÄ‡∏®‡∏™','‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏£‡∏ß‡∏°'] },
    { category:'‡∏≠‡∏•‡∏≤‡∏Ñ‡∏≤‡∏£‡πå‡∏ó', type:'Alacarte', items:['‡∏ú‡∏±‡∏î‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤‡πÑ‡∏Å‡πà','‡∏ï‡πâ‡∏°‡∏¢‡∏≥‡∏Å‡∏∏‡πâ‡∏á‡∏ô‡πâ‡∏≥‡∏Ç‡πâ‡∏ô','‡πÅ‡∏Å‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏´‡∏ß‡∏≤‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠','‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡∏™‡∏±‡∏ö‡∏õ‡∏∞‡∏£‡∏î','‡∏™‡πâ‡∏°‡∏ï‡∏≥‡πÑ‡∏ó‡∏¢','‡∏Ñ‡∏≠‡∏´‡∏°‡∏π‡∏¢‡πà‡∏≤‡∏á','‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢‡∏Å‡∏∏‡πâ‡∏á‡∏™‡∏î'] }
];

const menuContainer=document.getElementById('menu-container');

MENU_DATA.filter(m=>m.type===selectedCategory).forEach(menu=>{
    menu.items.forEach((item,index)=>{
        const div=document.createElement('div');
        div.className='menu-item';
        div.setAttribute('data-name',item);
        div.setAttribute('data-category',menu.category);
        div.setAttribute('data-type',menu.type);
        div.innerHTML=`<div>${item}</div><div class="selected-icon">‚úì</div>`;
        div.addEventListener('click',toggleMenuItem);
        menuContainer.appendChild(div);
    });
});

function toggleMenuItem(event){
    const div=event.currentTarget;
    const key=div.getAttribute('data-name');
    if(selectedMenu[key]){
        delete selectedMenu[key];
        div.classList.remove('selected');
    } else {
        if(div.getAttribute('data-type')==='Breakfast'&&!isBreakfastTimeValid()){
            alert(`‡πÄ‡∏°‡∏ô‡∏π ${key} ‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏ä‡πâ‡∏≤ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏±‡πà‡∏á‡πÑ‡∏î‡πâ‡∏ä‡πà‡∏ß‡∏á ${BREAKFAST_START_TIME}-${BREAKFAST_END_TIME}`);
            return;
        }
        selectedMenu[key]={
            name:key,
            category:div.getAttribute('data-category'),
            type:div.getAttribute('data-type')
        };
        div.classList.add('selected');
    }
    updateSummary();
}

function isBreakfastTimeValid(){
    const now=new Date();
    const nowMinutes=now.getHours()*60+now.getMinutes();
    const [sh,sm]=BREAKFAST_START_TIME.split(':').map(Number);
    const [eh,em]=BREAKFAST_END_TIME.split(':').map(Number);
    const startMinutes=sh*60+sm;
    const endMinutes=eh*60+em;
    return nowMinutes>=startMinutes && nowMinutes<=endMinutes;
}

function updateSummary(){
    const list=document.getElementById('selected-menu-list');
    list.innerHTML='';
    if(Object.keys(selectedMenu).length===0){
        list.innerHTML='<li>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π</li>';
        return;
    }
    for(const key in selectedMenu){
        const item=selectedMenu[key];
        const li=document.createElement('li');
        li.textContent=`${item.name} (${item.category} / ${item.type})`;
        list.appendChild(li);
    }
}

document.getElementById('serviceType').addEventListener('change',checkRoomServiceTime);
document.getElementById('time').addEventListener('change',checkRoomServiceTime);

function checkRoomServiceTime(){
    const serviceType=document.getElementById('serviceType').value;
    const time=document.getElementById('time').value;
    const alertDiv=document.getElementById('room-service-alert');
    if(serviceType==='Room-service'&&time<ROOM_SERVICE_START_TIME){
        alertDiv.style.display='block';
    } else {
        alertDiv.style.display='none';
    }
}

document.getElementById('submit-order').addEventListener('click',submitOrder);

async function submitOrder(){
    const form=document.getElementById('order-form');
    if(!form.checkValidity()){
        form.reportValidity();
        return;
    }
    if(Object.keys(selectedMenu).length===0){
        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£');
        return;
    }
    let roomNo=document.getElementById('roomNo').value;
    const pax=document.getElementById('pax').value;
    const serviceType=document.getElementById('serviceType').value;
    let time=document.getElementById('time').value;
    if(serviceType==='Room-service' && time<ROOM_SERVICE_START_TIME){
        time=ROOM_SERVICE_START_TIME;
    }
    const hasBreakfast=Object.values(selectedMenu).some(item=>item.type==='Breakfast');
    if(hasBreakfast && !isBreakfastTimeValid()){
        alert(`‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏ä‡πâ‡∏≤ ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ä‡πà‡∏ß‡∏á ${BREAKFAST_START_TIME}-${BREAKFAST_END_TIME}`);
        return;
    }
    const orderData={roomNo,pax,serviceType,time,selectedMenu};
    document.getElementById('submit-order').textContent='‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á...';
    document.getElementById('submit-order').disabled=true;
    try{
        const response=await fetch(WEB_APP_URL,{
            method:'POST',
            headers:{'Content-Type':'text/plain;charset=utf-8'},
            body:JSON.stringify(orderData)
        });
        const result=await response.json();
        if(result.success){
            alert('‚úÖ ‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
            form.reset();
            selectedMenu={};
            document.querySelectorAll('.menu-item').forEach(d=>d.classList.remove('selected'));
            updateSummary();
        } else {
            alert('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: '+result.message);
        }
    } catch(err){
        console.error(err);
        alert('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠');
    } finally{
        document.getElementById('submit-order').textContent='‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠';
        document.getElementById('submit-order').disabled=false;
    }
}

// ‡∏™‡πÑ‡∏•‡∏î‡πå‡∏†‡∏≤‡∏û
const sliderImgs=document.querySelectorAll('#slider img');
let sliderIndex=0;
setInterval(()=>{
    sliderImgs.forEach(img=>img.classList.remove('active'));
    sliderIndex=(sliderIndex+1)%sliderImgs.length;
    sliderImgs[sliderIndex].classList.add('active');
},3000);
</script>
</body>
</html>
