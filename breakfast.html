<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏ä‡πâ‡∏≤</title>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f4f4f9; color:#333; }
.container { display:flex; flex-wrap:wrap; max-width:1200px; margin:20px auto; gap:20px; }

/* Slider */
.slider-container { flex:1; min-width:300px; max-width:600px; position: relative; overflow: hidden; border-radius: 10px; display:flex; align-items:center; justify-content:center; padding:10px 0; background:#fff; box-shadow:0 2px 4px rgba(0,0,0,0.1);}
.slides { display:flex; transition: transform 0.5s ease-in-out; width:100%; }
.slide { min-width:100%; box-sizing:border-box; display:flex; align-items:center; justify-content:center; }
.slide img { width:auto; height:auto; max-width:100%; max-height:100%; display:block; object-fit:contain; border-radius:10px; }
.slider-buttons { position:absolute; top:50%; width:100%; display:flex; justify-content:space-between; transform:translateY(-50%); }
.slider-buttons button { background: rgba(0,0,0,0.5); border:none; color:white; font-size:2em; padding:0 12px; cursor:pointer; border-radius:50%; }

/* Menu */
.menu-form { flex:1; min-width:300px; background:#fff; padding:15px; border-radius:8px; box-shadow:0 2px 4px rgba(0,0,0,0.1);}
h2 { color:#007bff; margin-top:0; }
.tabs { display:flex; overflow-x:auto; margin-bottom:10px; border-bottom:2px solid #ccc; }
.tab-button { padding:8px 15px; cursor:pointer; background:#eee; border:none; margin-right:5px; border-radius:5px 5px 0 0; font-weight:bold; }
.tab-button.active { background:#007bff; color:#fff; }
.menu-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(150px,1fr)); gap:10px; margin-top:10px; }
.menu-item { border:1px solid #ddd; border-radius:8px; padding:8px; cursor:pointer; text-align:center; position:relative; transition:0.2s; }
.menu-item.selected { border:2px solid #28a745; box-shadow:0 0 10px rgba(40,167,69,0.5); }
.selected-icon { position:absolute; top:5px; right:5px; background:#28a745; color:white; border-radius:50%; width:24px; height:24px; line-height:24px; font-weight:bold; display:none; }
.menu-item.selected .selected-icon { display:block; }

#summary { margin-top:20px; padding:10px; background:#e9ecef; border-radius:4px; }
button#submit-order { width:100%; padding:15px; margin-top:15px; background:#28a745; color:#fff; border:none; border-radius:4px; cursor:pointer; font-size:1.1em; }
button#submit-order:hover { background:#218838; }
button#back { margin-bottom:15px; background:#007bff; color:#fff; padding:10px 15px; border:none; border-radius:4px; cursor:pointer; }
button#back:hover { background:#0056b3; }
label { display:block; margin-top:10px; font-weight:bold; }
input[type="text"], input[type="number"], input[type="time"], select, textarea { width:100%; padding:8px; margin-top:5px; border:1px solid #ccc; border-radius:4px; box-sizing:border-box; }
.alert-message { background-color:#ffc107; color:#333; padding:10px; border-radius:4px; margin-top:10px; font-weight:bold; text-align:center; display:none; }
</style>
<!-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô <head> -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</head>
<body>
<div class="container">

<!-- Slider -->
<div class="slider-container">
    <div class="slides">
        <div class="slide"><img src="breakfast.png"></div>
       
    </div>
    <div class="slider-buttons">
        <button id="prev">&#10094;</button>
        <button id="next">&#10095;</button>
    </div>
</div>

<!-- Menu Form -->
<div class="menu-form">
    <button id="back" onclick="window.location.href='index.html'">üîô ‡∏Å‡∏•‡∏±‡∏ö</button>
    <h2>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h2>
    <form id="order-form">
        <label>‡πÄ‡∏•‡∏Ç‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å:</label>
        <input type="text" id="roomNo" required placeholder="‡πÄ‡∏ä‡πà‡∏ô 101">
        <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡πà‡∏≤‡∏ô:</label>
        <input type="number" id="pax" min="1" value="1" required>
        <label>‡∏ß‡∏¥‡∏ò‡∏µ‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏´‡∏≤‡∏£:</label>
        <select id="serviceType" required>
            <option value="Dine-in">‡∏ó‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡πâ‡∏≤‡∏ô</option>
            <option value="Room-service">Room service</option>
        </select>
        <label>‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏á/‡πÉ‡∏´‡πâ‡πÑ‡∏õ‡∏™‡πà‡∏á:</label>
        <input type="time" id="time" value="09:00" required>
        <label>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°:</label>
        <textarea id="note" rows="3" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏û‡∏£‡∏¥‡∏Å, ‡∏Ç‡∏≠‡∏£‡πâ‡∏≠‡∏ô ‡πÜ"></textarea>
        <div id="room-service-alert" class="alert-message">‚ö†Ô∏è Room service ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ 9 ‡πÇ‡∏°‡∏á‡πÄ‡∏ä‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏ô‡πÑ‡∏õ</div>
    </form>

    <h2>‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏ä‡πâ‡∏≤</h2>
    <div class="tabs" id="menu-tabs"></div>
    <div id="menu-container"></div>

    <div id="summary">
        <h3>‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:</h3>
        <ul id="selected-menu-list"><li>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π</li></ul>
    </div>
    <button id="submit-order">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
</div>
</div>

<script>
// ================== Config ==================
const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbwkc_zR9a7DH-7SoI9BYuB1FoMPT0oyB_ZIURc30b0emOfuYcv5d0I5vqYSwWTd9KyZ/exec'; // ‡πÉ‡∏ä‡πâ Web App ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö Alacarte
const ROOM_SERVICE_START_TIME = '09:00';
let selectedMenu = [];

// ================== Data ==================
const MENU_DATA = [
    { category:'BREAKFAST', items:['‡πÑ‡∏Ç‡πà ‡∏≠‡∏≠‡∏°‡πÄ‡∏•‡πá‡∏ï (Wakey Wakey wellada Omelette)',
        '‡πÇ‡∏à‡πä‡∏Å‡∏´‡∏°‡∏π ‡πÄ‡∏ß‡∏•‡∏≤‡∏î‡∏≤ (Traditional Thai Breakfast)',
        '‡πÅ‡∏ã‡∏ô‡∏ß‡∏¥‡∏ä (Good morning Sandwich)',
        '‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î ‡∏≠‡∏£‡∏∏‡∏ì‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏¥‡πå (Arun sawat fried rice)',
        '‡πÅ‡∏û‡∏ô‡πÄ‡∏Ñ‡πâ‡∏Å (Rise and shine pancakes )'
    ] },
    { category:'DRINK', items:['‡∏ô‡∏°‡∏£‡πâ‡∏≠‡∏ô(Hot milk)','‡∏Å‡∏≤‡πÅ‡∏ü‡∏£‡πâ‡∏≠‡∏ô (Hot Cafe)','‡∏ä‡∏≤‡∏£‡πâ‡∏≠‡∏ô(Hot Tea)'] },
    { category:'FRUIT', items:['‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏£‡∏ß‡∏°','‡∏™‡∏•‡∏±‡∏î‡∏ú‡∏±‡∏Å'] }
];

// ================== Render Tabs ==================
const tabsContainer = document.getElementById('menu-tabs');
const menuContainer = document.getElementById('menu-container');
let currentTab = 0;

MENU_DATA.forEach((menu,index)=>{
    const btn = document.createElement('button');
    btn.className = 'tab-button '+(index===0?'active':'');
    btn.textContent = menu.category;
    btn.dataset.index = index;
    btn.addEventListener('click',()=>switchTab(index));
    tabsContainer.appendChild(btn);
});

function switchTab(index){
    currentTab=index;
    document.querySelectorAll('.tab-button').forEach(b=>b.classList.remove('active'));
    document.querySelector(`.tab-button[data-index="${index}"]`).classList.add('active');
    renderMenuContent();
}

function renderMenuContent(){
    menuContainer.innerHTML='';
    const menu = MENU_DATA[currentTab];
    const grid = document.createElement('div');
    grid.className='menu-grid';

    menu.items.forEach(item=>{
        const div = document.createElement('div');
        div.className='menu-item';
        div.dataset.name = item;
        const existing = selectedMenu.find(i=>i.name===item);
        const qty = existing ? existing.qty : 0;

        div.innerHTML = `
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <span>${item}</span>
                <button type="button" class="decrease-btn">‚ûñ</button>
            </div>
            <div class="selected-icon">x${qty}</div>
        `;

        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô
        div.addEventListener('click', (e)=>{
            if(e.target.classList.contains('decrease-btn')) return;
            addMenuItem(item, div);
        });

        // ‡∏•‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô
        div.querySelector('.decrease-btn').addEventListener('click', e=>{
            e.stopPropagation();
            decreaseMenuItem(item, div);
        });

        if(qty>0) div.classList.add('selected');
        grid.appendChild(div);
    });

    menuContainer.appendChild(grid);
}

// ================== Menu Functions ==================
function addMenuItem(name, div){
    let existing = selectedMenu.find(i=>i.name===name);
    if(existing) existing.qty+=1;
    else selectedMenu.push({name, qty:1});
    div.classList.add('selected');
    div.querySelector('.selected-icon').textContent=`x${selectedMenu.find(i=>i.name===name).qty}`;
    updateSummary();
}

function decreaseMenuItem(name, div){
    let existing = selectedMenu.find(i=>i.name===name);
    if(!existing) return;
    existing.qty-=1;
    if(existing.qty<=0){
        selectedMenu = selectedMenu.filter(i=>i.name!==name);
        div.classList.remove('selected');
        div.querySelector('.selected-icon').textContent='x0';
    } else {
        div.querySelector('.selected-icon').textContent=`x${existing.qty}`;
    }
    updateSummary();
}

function updateSummary(){
    const list=document.getElementById('selected-menu-list');
    list.innerHTML='';
    if(selectedMenu.length===0){
        list.innerHTML='<li>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π</li>';
        return;
    }
    selectedMenu.forEach(item=>{
        const li=document.createElement('li');
        li.textContent=`${item.name} x${item.qty}`;
        list.appendChild(li);
    });
}

// ================== Room Service ==================
document.getElementById('serviceType').addEventListener('change', checkRoomServiceTime);
document.getElementById('time').addEventListener('change', checkRoomServiceTime);

function checkRoomServiceTime(){
    const serviceType = document.getElementById('serviceType').value;
    const time = document.getElementById('time').value;
    const alertDiv = document.getElementById('room-service-alert');
    if(serviceType==='Room-service' && time < ROOM_SERVICE_START_TIME){
        alertDiv.style.display='block';
    } else alertDiv.style.display='none';
}

// ================== Submit ==================
document.getElementById('submit-order').addEventListener('click', async () => {
    const form = document.getElementById('order-form');
    if (!form.checkValidity()) { form.reportValidity(); return; }
    if (selectedMenu.length === 0) { 
        Swal.fire({
            icon: 'warning',
            title: '‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π',
            text: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£',
            confirmButtonText: '‡∏ï‡∏Å‡∏•‡∏á',
            background: '#fff9e6',
        });
        return; 
    }

    const roomNo = document.getElementById('roomNo').value;
    const pax = document.getElementById('pax').value;
    const serviceType = document.getElementById('serviceType').value;
    let time = document.getElementById('time').value;
    if (serviceType === 'Room-service' && time < ROOM_SERVICE_START_TIME) time = ROOM_SERVICE_START_TIME;
    const note = document.getElementById('note').value;

    const orderItems = Object.values(selectedMenu).map(item => `‚Ä¢ ${item.name} x${item.qty}`).join('\n');

    const orderData = {
        roomNo,
        pax,
        serviceType,
        time,
        selectedMenu: orderItems,
        note
    };

    document.getElementById('submit-order').textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á...';
    document.getElementById('submit-order').disabled = true;

    try {
        const res = await fetch(WEB_APP_URL, {
            method: 'POST',
            headers: { 'Content-Type': 'text/plain;charset=utf-8' },
            body: JSON.stringify(orderData)
        });
        const result = await res.json();
        if (result.success) {
            Swal.fire({
                title: 'üéâ ‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!',
                imageUrl: 'https://cdn-icons-png.flaticon.com/512/1046/1046784.png', // ‡∏£‡∏π‡∏õ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å
                imageWidth: 100,
                imageHeight: 100,
                imageAlt: 'Food Success',
                confirmButtonText: '‡∏ï‡∏Å‡∏•‡∏á',
                background: '#fff9e6',
                color: '#333',
            });

            form.reset();
            selectedMenu = [];
            renderMenuContent();
            updateSummary();
        } else {
            Swal.fire({
                icon: 'error',
                title: '‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',
                text: result.message,
                confirmButtonText: '‡∏ï‡∏Å‡∏•‡∏á',
                background: '#fff0f0',
            });
        }
    } catch (e) {
        console.error(e);
        Swal.fire({
            icon: 'error',
            title: '‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠',
            confirmButtonText: '‡∏ï‡∏Å‡∏•‡∏á',
            background: '#fff0f0',
        });
    } finally {
        document.getElementById('submit-order').textContent = '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠';
        document.getElementById('submit-order').disabled = false;
    }
});
// ================== Slider ==================
const slidesEl = document.querySelector('.slides');
const slides = document.querySelectorAll('.slide');
let sliderIndex = 0;

document.getElementById('next').addEventListener('click', ()=>{
    sliderIndex = (sliderIndex + 1) % slides.length;
    slidesEl.style.transform = `translateX(-${sliderIndex*100}%)`;
});

document.getElementById('prev').addEventListener('click', ()=>{
    sliderIndex = (sliderIndex - 1 + slides.length) % slides.length;
    slidesEl.style.transform = `translateX(-${sliderIndex*100}%)`;
});


// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô render
renderMenuContent();
</script>
</body>
</html>
